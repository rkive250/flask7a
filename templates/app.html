<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti贸n de Cursos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<h1>Gesti贸n de Cursos</h1>

<h2>Agregar Curso</h2>
<form id="formAgregar">
    <label for="ncurso">Nombre del Curso:</label>
    <input type="text" id="ncurso" required>
    
    <label for="duracion">Duraci贸n:</label>
    <input type="text" id="duracion" required>
    
    <button type="submit">Agregar Curso</button>
</form>

<h2>Actualizar Curso</h2>
<form id="formActualizar">
    <label for="idcurso">ID del Curso:</label>
    <input type="number" id="idcurso" required>
    
    <label for="ncursoUpdate">Nombre del Curso:</label>
    <input type="text" id="ncursoUpdate" required>
    
    <label for="duracionUpdate">Duraci贸n:</label>
    <input type="text" id="duracionUpdate" required>
    
    <button type="submit">Actualizar Curso</button>
</form>

<h2>Eliminar Curso</h2>
<form id="formEliminar">
    <label for="idcursoEliminar">ID del Curso:</label>
    <input type="number" id="idcursoEliminar" required>
    
    <button type="submit">Eliminar Curso</button>
</form>

<script>
$(document).ready(function() {
    // Agregar curso
    $("#formAgregar").on("submit", function(e) {
        e.preventDefault();
        const nombreCurso = $("#ncurso").val();
        const duracion = $("#duracion").val();
        
        $.ajax({
            url: "/agregar",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify({ ncurso: nombreCurso, duracion: duracion }),
            success: function(response) {
                alert(response.message);
                $("#formAgregar")[0].reset();
            },
            error: function(xhr) {
                alert(xhr.responseJSON.error);
            }
        });
    });

    // Actualizar curso
    $("#formActualizar").on("submit", function(e) {
        e.preventDefault();
        const idCurso = $("#idcurso").val();
        const nombreCurso = $("#ncursoUpdate").val();
        const duracion = $("#duracionUpdate").val();
        
        $.ajax({
            url: "/actualizar",
            method: "PUT",
            contentType: "application/json",
            data: JSON.stringify({ idcurso: idCurso, ncurso: nombreCurso, duracion: duracion }),
            success: function(response) {
                alert(response.message);
                $("#formActualizar")[0].reset();
            },
            error: function(xhr) {
                alert(xhr.responseJSON.error);
            }
        });
    });

    // Eliminar curso
    $("#formEliminar").on("submit", function(e) {
        e.preventDefault();
        const idCurso = $("#idcursoEliminar").val();
        
        $.ajax({
            url: "/eliminar/" + idCurso,
            method: "DELETE",
            success: function(response) {
                alert(response.message);
                $("#formEliminar")[0].reset();
            },
            error: function(xhr) {
                alert(xhr.responseJSON.error);
            }
        });
    });
});
</script>

</body>
</html>
